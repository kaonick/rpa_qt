# Python 庫存停損停利範例教學程式(GUI應用)

---
> ## **Disclaimer: 範例程式碼及執行檔僅供教學與參考之用，實務交易應自行評估並承擔相關風險**
> 
---

本程式碼為富邦新一代API & XQ化學反應(二)線上講座範例，示範如何應用 Python 執行庫存停損停利，Python 會以 GUI 工具製作自己的搶漲停圖形化介面程式<br>

**須注意**本程式範例只涵蓋一般現股多單出場，使用市價下單，全額交割股、處置股會下單失敗**，且程式邏輯**僅包含觸價發出市價單**，會發出當下觸即停損停利設定價格**庫存張數的市價單**

* tp_sl_gui_v2.py<br>
  **本檔案為主要程式也是執行檔原碼**，GUI套件使用Pyside6，Python版本須為>=3.11，有任何需求都可以從這邊做修正
     
## 登入設定
在程式登入畫面中請使用以下設定
> Your ID= #身份證字號<br>
> Password= #交易密碼<br>
> Cert path= #憑證路徑(可使用按鈕選取憑證檔案，會自動帶入路徑)<br>
> Cert Password= #憑證密碼<br>
> Account= #交易帳號<br>

## 主程式設定
* 監控設定<br>
  * 既有庫存停損利
    * 執行開始監控後，將由系統匯入既有庫存列表，可於表格中設定停損例參數
  * 新部位停損利
    * 預設停損-5%(負數)，當有任何屬於該帳號的**新部位**透過成交回報進來時會依成交價格設定-5%停損, 若已存在相同股票則不覆蓋<br>
    * 預設停損5%(正數)，當有任何屬於該帳號的**新部位**透過成交回報進來時會依成交價格設定5%停利, 若已存在相同股票則不覆蓋<br>

## 參考連結
富邦新一代API Python SDK載點及開發說明文件
* 新一代API SDK 載點<br>
https://www.fbs.com.tw/TradeAPI/docs/download/download-sdk
* 新一代API 開發說明文件<br>
https://www.fbs.com.tw/TradeAPI/docs/trading/introduction 
* 新一代API & XQ社群討論<br>
  * Line: https://reurl.cc/dnMxlV
  * Discord: https://discord.com/invite/VHjjc4C

## Pyinstaller 編譯執行檔設定

---
> **Python程式不需編譯即可執行，此處內容僅供欲將程式打包為執行檔之參考，打包執行檔可方便日後執行程式**
---

建議使用conda指令安裝pyinstaller減少環境問題<br>
```
conda install pyinstaller
```
若想編譯與教學範例一致之執行檔，請先將tp_sl_gui.py、tp_sl_gui.spec、inventory.ico三個檔案移至同一資料夾，並用指令如下<br>
```
pyinstaller tp_sl_gui.spec
```
編譯完成後，應會出現單個執行檔在dist資料夾內<br>
若想由原始碼編譯，建議使用以下指令進行單檔打包，在部署到其他裝置時會比較容易
```
pyinstaller -F tp_sl_gui.py
```
pyinstaller會自動產生新的tp_sl_gui.spec，可以再依自己的喜好調整參數
